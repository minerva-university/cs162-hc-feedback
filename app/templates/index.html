<!-- templates/index.html -->
{% extends "base.html" %}
{% block content %}


<div class="container">
    <!-- HC List Section -->
    <div id="hcList" class="hc-list">
        <h2>HCs Feedback</h2>
        <p class="hc-feedback-description">
            This tool will help you receive feedback on your applications and gain a better understanding of HC
            processes.
        </p>

        <!-- Add cornerstone filter -->
        <select id="cornerstoneFilter" class="cornerstone-select">
            <option value="">All Cornerstones</option>
            {% for cornerstone in cornerstones %}
            <option value="{{ cornerstone.name }}">{{ cornerstone.display_name }}</option>
            {% endfor %}
        </select>

        <select id="hcSelect" class="hc-select">
            <option value="">Select an HC example...</option>
        </select>
    </div>


    <!-- Action Buttons -->
    <div class="action-buttons">
        <button id="footnoteButton" class="btn" onclick="showModal('footnoteModal')" disabled>
            View Example Footnote
        </button> <button onclick="showModal('contextModal')" class="btn">Add Context</button>
        <a id="handbookLink" class="btn">View in HC Handbook</a>
    </div>

    <!-- Feedback Form -->
    <form id="feedbackForm" class="feedback-form" onsubmit="submitFeedback(event)">
        <textarea id="assignmentText" class="feedback-textarea"
            placeholder="Assignment Portion to be feedback-ed here..." spellcheck="true" rows="10"></textarea>

        <!-- Terms Checkbox -->
        <div class="terms-container">
            <input type="checkbox" id="termsAgree" required>
            <label for="termsAgree">By submitting, I agree to the terms and conditions</label>
        </div>

        <button type="submit" class="submit-btn">REQUEST FEEDBACK</button>
    </form>

    <!-- Progress Section -->
    <div id="progressSection" class="progress-section hidden">
        <div class="phase-indicator">
            <div class="phase-step">Input Analysis</div>
            <div class="phase-step">Content Validation</div>
            <div class="phase-step">HC Processing</div>
            <div class="phase-step">Feedback Generation</div>
        </div>
        <div class="progress-container">
            <div id="progressBar" class="progress-bar"></div>
        </div>
        <p id="progressStatus" class="progress-status">Processing...</p>
        <button id="toggleLog" class="toggle-log-btn">Show Processing Details</button>
        <div id="processingLog" class="processing-log hidden"></div>
    </div>

    <!-- Feedback Results -->
    <div id="feedbackResults" class="feedback-results hidden">
        <p id="feedbackText" class="feedback-text"></p>

        <div class="actionable-steps">
            <h3>Actionable Next Steps (Optional)</h3>
            <div id="actionableSteps" class="steps-list"></div>
        </div>
    </div>

    <!-- Modals -->
    <div id="footnoteModal" class="modal hidden">
        <div class="modal-content">
            <!-- Content will be populated by JavaScript -->
        </div>
    </div>

    <div id="contextModal" class="modal hidden">
        <div class="modal-content">
            <h2>Add Context</h2>
            <p>Context information goes here...</p>
            <button onclick="hideModal('contextModal')" class="btn">Close</button>
        </div>
    </div>
    <!-- Handbook Message Modal -->
    <div id="handbookModal" class="modal hidden">
        <div class="modal-content">
            <h2>Notice</h2>
            <p>You will be directed to the HC Handbook.</p>
            <button onclick="hideModal('handbookModal')" class="btn">Close</button>
        </div>
    </div>

</div>
{% endblock %}